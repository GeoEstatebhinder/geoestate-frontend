{"ast":null,"code":"// UploadPage.js\nimport React,{useState,useEffect}from'react';import axios from'axios';import{useLocation,useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UploadPage=()=>{const[form,setForm]=useState({title:'',price:'',location:'',description:'',image:''});const[file,setFile]=useState(null);const[loading,setLoading]=useState(false);const navigate=useNavigate();const location=useLocation();const params=new URLSearchParams(location.search);const editingId=params.get('id');useEffect(()=>{if(editingId){axios.get(`/api/properties/${editingId}`).then(res=>{setForm(res.data);});}},[editingId]);const handleChange=e=>{setForm({...form,[e.target.name]:e.target.value});};const handleUploadImage=async()=>{const data=new FormData();data.append('file',file);data.append('upload_preset','geoestate');const res=await axios.post('https://api.cloudinary.com/v1_1/demo/image/upload',data);return res.data.secure_url;};const handleSubmit=async e=>{e.preventDefault();setLoading(true);try{const token=localStorage.getItem('token');let imageUrl=form.image;if(file)imageUrl=await handleUploadImage();const payload={...form,image:imageUrl};if(editingId){await axios.put(`/api/properties/${editingId}`,payload,{headers:{Authorization:`Bearer ${token}`}});}else{await axios.post('/api/properties',payload,{headers:{Authorization:`Bearer ${token}`}});}navigate('/dashboard');}catch(err){console.error('Upload failed:',err);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-3xl mx-auto p-6 bg-white shadow rounded-xl mt-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold mb-6 text-center\",children:editingId?'Edit Property':'Upload New Property'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"grid gap-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"title\",value:form.title,onChange:handleChange,placeholder:\"Property Title\",className:\"p-3 border border-gray-300 rounded-lg\",required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"price\",value:form.price,onChange:handleChange,placeholder:\"Price in \\u20B9\",className:\"p-3 border border-gray-300 rounded-lg\",required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"location\",value:form.location,onChange:handleChange,placeholder:\"Location (City, Area)\",className:\"p-3 border border-gray-300 rounded-lg\",required:true}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:form.description,onChange:handleChange,placeholder:\"Property Description\",rows:\"4\",className:\"p-3 border border-gray-300 rounded-lg\",required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:e=>setFile(e.target.files[0]),className:\"p-2\"}),form.image&&/*#__PURE__*/_jsx(\"img\",{src:form.image,alt:\"Preview\",className:\"h-48 object-cover rounded\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700\",children:loading?'Saving...':editingId?'Update Property':'Upload Property'})]})]});};export default UploadPage;","map":{"version":3,"names":["React","useState","useEffect","axios","useLocation","useNavigate","jsx","_jsx","jsxs","_jsxs","UploadPage","form","setForm","title","price","location","description","image","file","setFile","loading","setLoading","navigate","params","URLSearchParams","search","editingId","get","then","res","data","handleChange","e","target","name","value","handleUploadImage","FormData","append","post","secure_url","handleSubmit","preventDefault","token","localStorage","getItem","imageUrl","payload","put","headers","Authorization","err","console","error","className","children","onSubmit","type","onChange","placeholder","required","rows","files","src","alt","disabled"],"sources":["D:/GeoEstateProjecttries/geoestate-frontend/src/pages/UploadPage.js"],"sourcesContent":["// UploadPage.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\n\r\nconst UploadPage = () => {\r\n  const [form, setForm] = useState({\r\n    title: '',\r\n    price: '',\r\n    location: '',\r\n    description: '',\r\n    image: '',\r\n  });\r\n  const [file, setFile] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const params = new URLSearchParams(location.search);\r\n  const editingId = params.get('id');\r\n\r\n  useEffect(() => {\r\n    if (editingId) {\r\n      axios.get(`/api/properties/${editingId}`).then((res) => {\r\n        setForm(res.data);\r\n      });\r\n    }\r\n  }, [editingId]);\r\n\r\n  const handleChange = (e) => {\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleUploadImage = async () => {\r\n    const data = new FormData();\r\n    data.append('file', file);\r\n    data.append('upload_preset', 'geoestate');\r\n    const res = await axios.post('https://api.cloudinary.com/v1_1/demo/image/upload', data);\r\n    return res.data.secure_url;\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      let imageUrl = form.image;\r\n      if (file) imageUrl = await handleUploadImage();\r\n      const payload = { ...form, image: imageUrl };\r\n\r\n      if (editingId) {\r\n        await axios.put(`/api/properties/${editingId}`, payload, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n      } else {\r\n        await axios.post('/api/properties', payload, {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n      }\r\n      navigate('/dashboard');\r\n    } catch (err) {\r\n      console.error('Upload failed:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-3xl mx-auto p-6 bg-white shadow rounded-xl mt-8\">\r\n      <h1 className=\"text-2xl font-bold mb-6 text-center\">\r\n        {editingId ? 'Edit Property' : 'Upload New Property'}\r\n      </h1>\r\n\r\n      <form onSubmit={handleSubmit} className=\"grid gap-4\">\r\n        <input\r\n          type=\"text\"\r\n          name=\"title\"\r\n          value={form.title}\r\n          onChange={handleChange}\r\n          placeholder=\"Property Title\"\r\n          className=\"p-3 border border-gray-300 rounded-lg\"\r\n          required\r\n        />\r\n        <input\r\n          type=\"number\"\r\n          name=\"price\"\r\n          value={form.price}\r\n          onChange={handleChange}\r\n          placeholder=\"Price in â‚¹\"\r\n          className=\"p-3 border border-gray-300 rounded-lg\"\r\n          required\r\n        />\r\n        <input\r\n          type=\"text\"\r\n          name=\"location\"\r\n          value={form.location}\r\n          onChange={handleChange}\r\n          placeholder=\"Location (City, Area)\"\r\n          className=\"p-3 border border-gray-300 rounded-lg\"\r\n          required\r\n        />\r\n        <textarea\r\n          name=\"description\"\r\n          value={form.description}\r\n          onChange={handleChange}\r\n          placeholder=\"Property Description\"\r\n          rows=\"4\"\r\n          className=\"p-3 border border-gray-300 rounded-lg\"\r\n          required\r\n        ></textarea>\r\n        <input\r\n          type=\"file\"\r\n          onChange={(e) => setFile(e.target.files[0])}\r\n          className=\"p-2\"\r\n        />\r\n        {form.image && (\r\n          <img src={form.image} alt=\"Preview\" className=\"h-48 object-cover rounded\" />\r\n        )}\r\n\r\n        <button\r\n          type=\"submit\"\r\n          disabled={loading}\r\n          className=\"bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700\"\r\n        >\r\n          {loading ? 'Saving...' : editingId ? 'Update Property' : 'Upload Property'}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UploadPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}