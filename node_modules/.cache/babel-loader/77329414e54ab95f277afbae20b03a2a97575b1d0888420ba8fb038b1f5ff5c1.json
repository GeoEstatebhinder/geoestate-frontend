{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AdminDashboard(){const[properties,setProperties]=useState([]);const navigate=useNavigate();useEffect(()=>{const fetchProperties=async()=>{try{const token=localStorage.getItem('token');const res=await axios.get('http://localhost:5000/api/properties',{headers:{Authorization:`Bearer ${token}`}});setProperties(res.data);}catch(error){console.error('Error fetching properties:',error);}};fetchProperties();},[]);const handleDelete=async id=>{if(!window.confirm('Are you sure you want to delete this listing?'))return;try{const token=localStorage.getItem('token');await axios.delete(`http://localhost:5000/api/properties/${id}`,{headers:{Authorization:`Bearer ${token}`}});setProperties(prev=>prev.filter(p=>p._id!==id));}catch(error){console.error('Delete failed:',error);}};const handleEdit=id=>{navigate(`/upload?id=${id}`);};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold mb-4\",children:\"Admin Dashboard\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\",children:properties.map(property=>/*#__PURE__*/_jsxs(\"div\",{className:\"border p-4 rounded shadow\",children:[/*#__PURE__*/_jsx(\"img\",{src:property.image,alt:property.title,className:\"h-48 w-full object-cover rounded mb-2\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold\",children:property.title}),/*#__PURE__*/_jsxs(\"p\",{children:[property.city,\" \\u2022 \\u20B9\",property.price]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(property._id),className:\"bg-yellow-400 px-3 py-1 rounded\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(property._id),className:\"bg-red-500 text-white px-3 py-1 rounded\",children:\"Delete\"})]})]},property._id))})]});}export default AdminDashboard;","map":{"version":3,"names":["React","useEffect","useState","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","AdminDashboard","properties","setProperties","navigate","fetchProperties","token","localStorage","getItem","res","get","headers","Authorization","data","error","console","handleDelete","id","window","confirm","delete","prev","filter","p","_id","handleEdit","className","children","map","property","src","image","alt","title","city","price","onClick"],"sources":["D:/GeoEstateProjecttries/geoestate-frontend/src/pages/AdminDashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction AdminDashboard() {\r\n  const [properties, setProperties] = useState([]);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const fetchProperties = async () => {\r\n      try {\r\n        const token = localStorage.getItem('token');\r\n        const res = await axios.get('http://localhost:5000/api/properties', {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        });\r\n        setProperties(res.data);\r\n      } catch (error) {\r\n        console.error('Error fetching properties:', error);\r\n      }\r\n    };\r\n\r\n    fetchProperties();\r\n  }, []);\r\n\r\n  const handleDelete = async (id) => {\r\n    if (!window.confirm('Are you sure you want to delete this listing?')) return;\r\n    try {\r\n      const token = localStorage.getItem('token');\r\n      await axios.delete(`http://localhost:5000/api/properties/${id}`, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      setProperties(prev => prev.filter(p => p._id !== id));\r\n    } catch (error) {\r\n      console.error('Delete failed:', error);\r\n    }\r\n  };\r\n\r\n  const handleEdit = (id) => {\r\n    navigate(`/upload?id=${id}`);\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-4\">\r\n      <h1 className=\"text-2xl font-bold mb-4\">Admin Dashboard</h1>\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n        {properties.map((property) => (\r\n          <div key={property._id} className=\"border p-4 rounded shadow\">\r\n            <img\r\n              src={property.image}\r\n              alt={property.title}\r\n              className=\"h-48 w-full object-cover rounded mb-2\"\r\n            />\r\n            <h2 className=\"text-lg font-semibold\">{property.title}</h2>\r\n            <p>{property.city} • ₹{property.price}</p>\r\n            <div className=\"mt-2 flex gap-2\">\r\n              <button\r\n                onClick={() => handleEdit(property._id)}\r\n                className=\"bg-yellow-400 px-3 py-1 rounded\"\r\n              >\r\n                Edit\r\n              </button>\r\n              <button\r\n                onClick={() => handleDelete(property._id)}\r\n                className=\"bg-red-500 text-white px-3 py-1 rounded\"\r\n              >\r\n                Delete\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AdminDashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}