{"ast":null,"code":"// src/pages/MapView.js\nimport React,{useEffect,useState}from'react';import{MapContainer,TileLayer,Marker,Popup}from'react-leaflet';import L from'leaflet';import axios from'axios';import'leaflet/dist/leaflet.css';// Fix default icon issue with Leaflet in React\nimport iconUrl from'leaflet/dist/images/marker-icon.png';import iconShadow from'leaflet/dist/images/marker-shadow.png';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const defaultIcon=L.icon({iconUrl,shadowUrl:iconShadow,iconAnchor:[12,41]});L.Marker.prototype.options.icon=defaultIcon;const MapView=()=>{const[properties,setProperties]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{const fetchProperties=async()=>{try{const res=await axios.get('http://localhost:5000/api/properties');setProperties(res.data);}catch(err){console.error('Map fetch error:',err);}finally{setLoading(false);}};fetchProperties();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen p-6 bg-slate-100\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold mb-4\",children:\"Map View\"}),loading?/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-600\",children:\"Loading map...\"}):/*#__PURE__*/_jsxs(MapContainer,{center:[30.7333,76.7794]// Center around Chandigarh\n,zoom:7,scrollWheelZoom:true,className:\"h-[80vh] w-full rounded-xl shadow\",children:[/*#__PURE__*/_jsx(TileLayer,{url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",attribution:\"\\xA9 OpenStreetMap contributors\"}),properties.map(p=>/*#__PURE__*/_jsx(Marker,{position:[p.latitude||30.7333,p.longitude||76.7794],children:/*#__PURE__*/_jsx(Popup,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm\",children:[/*#__PURE__*/_jsx(\"strong\",{children:p.title}),/*#__PURE__*/_jsx(\"br\",{}),\"\\u20B9\",p.price.toLocaleString(),/*#__PURE__*/_jsx(\"br\",{}),p.city||p.location]})})},p._id))]})]});};export default MapView;","map":{"version":3,"names":["React","useEffect","useState","MapContainer","TileLayer","Marker","Popup","L","axios","iconUrl","iconShadow","jsx","_jsx","jsxs","_jsxs","defaultIcon","icon","shadowUrl","iconAnchor","prototype","options","MapView","properties","setProperties","loading","setLoading","fetchProperties","res","get","data","err","console","error","className","children","center","zoom","scrollWheelZoom","url","attribution","map","p","position","latitude","longitude","title","price","toLocaleString","city","location","_id"],"sources":["D:/GeoEstateProjecttries/geoestate-frontend/src/pages/MapView.js"],"sourcesContent":["// src/pages/MapView.js\r\nimport React, { useEffect, useState } from 'react';\r\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';\r\nimport L from 'leaflet';\r\nimport axios from 'axios';\r\nimport 'leaflet/dist/leaflet.css';\r\n\r\n// Fix default icon issue with Leaflet in React\r\nimport iconUrl from 'leaflet/dist/images/marker-icon.png';\r\nimport iconShadow from 'leaflet/dist/images/marker-shadow.png';\r\n\r\nconst defaultIcon = L.icon({\r\n  iconUrl,\r\n  shadowUrl: iconShadow,\r\n  iconAnchor: [12, 41],\r\n});\r\nL.Marker.prototype.options.icon = defaultIcon;\r\n\r\nconst MapView = () => {\r\n  const [properties, setProperties] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchProperties = async () => {\r\n      try {\r\n        const res = await axios.get('http://localhost:5000/api/properties');\r\n        setProperties(res.data);\r\n      } catch (err) {\r\n        console.error('Map fetch error:', err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchProperties();\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"min-h-screen p-6 bg-slate-100\">\r\n      <h1 className=\"text-3xl font-bold mb-4\">Map View</h1>\r\n      {loading ? (\r\n        <p className=\"text-center text-gray-600\">Loading map...</p>\r\n      ) : (\r\n        <MapContainer\r\n          center={[30.7333, 76.7794]} // Center around Chandigarh\r\n          zoom={7}\r\n          scrollWheelZoom={true}\r\n          className=\"h-[80vh] w-full rounded-xl shadow\"\r\n        >\r\n          <TileLayer\r\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n            attribution=\"&copy; OpenStreetMap contributors\"\r\n          />\r\n\r\n          {properties.map((p) => (\r\n            <Marker key={p._id} position={[p.latitude || 30.7333, p.longitude || 76.7794]}>\r\n              <Popup>\r\n                <div className=\"text-sm\">\r\n                  <strong>{p.title}</strong>\r\n                  <br />\r\n                  â‚¹{p.price.toLocaleString()}\r\n                  <br />\r\n                  {p.city || p.location}\r\n                </div>\r\n              </Popup>\r\n            </Marker>\r\n          ))}\r\n        </MapContainer>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MapView;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}