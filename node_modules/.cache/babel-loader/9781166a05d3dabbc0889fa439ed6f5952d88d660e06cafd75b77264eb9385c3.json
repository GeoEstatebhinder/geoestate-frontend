{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UploadPage=()=>{const[form,setForm]=useState({title:'',description:'',price:'',location:'',image:''});const[file,setFile]=useState(null);const handleChange=e=>{setForm({...form,[e.target.name]:e.target.value});};const handleImageUpload=async()=>{const data=new FormData();data.append('file',file);data.append('upload_preset','your_upload_preset');const res=await axios.post('https://api.cloudinary.com/v1_1/your_cloud_name/image/upload',data);return res.data.secure_url;};const handleSubmit=async e=>{e.preventDefault();const token=localStorage.getItem('token');const imageUrl=await handleImageUpload();const payload={...form,image:imageUrl};axios.post('http://localhost:5000/api/properties',payload,{headers:{Authorization:`Bearer ${token}`}}).then(res=>alert('Listing uploaded!')).catch(err=>console.error(err));};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 max-w-xl mx-auto\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl mb-4 font-semibold\",children:\"Upload New Property\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"title\",placeholder:\"Title\",onChange:handleChange,className:\"w-full p-2 border\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"price\",placeholder:\"Price\",onChange:handleChange,className:\"w-full p-2 border\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"location\",placeholder:\"Location\",onChange:handleChange,className:\"w-full p-2 border\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",placeholder:\"Description\",onChange:handleChange,className:\"w-full p-2 border\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:e=>setFile(e.target.files[0])}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-blue-600 text-white px-4 py-2\",children:\"Upload\"})]})]});};export default UploadPage;","map":{"version":3,"names":["React","useState","axios","jsx","_jsx","jsxs","_jsxs","UploadPage","form","setForm","title","description","price","location","image","file","setFile","handleChange","e","target","name","value","handleImageUpload","data","FormData","append","res","post","secure_url","handleSubmit","preventDefault","token","localStorage","getItem","imageUrl","payload","headers","Authorization","then","alert","catch","err","console","error","className","children","onSubmit","type","placeholder","onChange","files"],"sources":["D:/GeoEstateProjecttries/geoestate-frontend/src/pages/UploadPage.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst UploadPage = () => {\r\n  const [form, setForm] = useState({\r\n    title: '',\r\n    description: '',\r\n    price: '',\r\n    location: '',\r\n    image: ''\r\n  });\r\n  const [file, setFile] = useState(null);\r\n\r\n  const handleChange = e => {\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handleImageUpload = async () => {\r\n    const data = new FormData();\r\n    data.append('file', file);\r\n    data.append('upload_preset', 'your_upload_preset');\r\n    const res = await axios.post('https://api.cloudinary.com/v1_1/your_cloud_name/image/upload', data);\r\n    return res.data.secure_url;\r\n  };\r\n\r\n  const handleSubmit = async e => {\r\n    e.preventDefault();\r\n    const token = localStorage.getItem('token');\r\n    const imageUrl = await handleImageUpload();\r\n    const payload = { ...form, image: imageUrl };\r\n\r\n    axios.post('http://localhost:5000/api/properties', payload, {\r\n      headers: { Authorization: `Bearer ${token}` }\r\n    })\r\n    .then(res => alert('Listing uploaded!'))\r\n    .catch(err => console.error(err));\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-4 max-w-xl mx-auto\">\r\n      <h2 className=\"text-2xl mb-4 font-semibold\">Upload New Property</h2>\r\n      <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n        <input type=\"text\" name=\"title\" placeholder=\"Title\" onChange={handleChange} className=\"w-full p-2 border\" />\r\n        <input type=\"text\" name=\"price\" placeholder=\"Price\" onChange={handleChange} className=\"w-full p-2 border\" />\r\n        <input type=\"text\" name=\"location\" placeholder=\"Location\" onChange={handleChange} className=\"w-full p-2 border\" />\r\n        <textarea name=\"description\" placeholder=\"Description\" onChange={handleChange} className=\"w-full p-2 border\"></textarea>\r\n        <input type=\"file\" onChange={e => setFile(e.target.files[0])} />\r\n        <button type=\"submit\" className=\"bg-blue-600 text-white px-4 py-2\">Upload</button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UploadPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}